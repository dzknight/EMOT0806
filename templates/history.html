<!DOCTYPE html>
<html>
<head>
    <title>ë¶„ì„ ê¸°ë¡ - ì–¼êµ´ ê°ì • ë¶„ì„</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.3/css/bulma.min.css">
    <style>
        body {
            padding: 20px;
        }
        h1 {
            color: #4A4A4A;
        }
        .emotion-tag {
            border-radius: 8px;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <!-- í—¤ë” -->
    <header class="hero is-info is-small" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
        <div class="hero-body">
            <div class="container">
                <h1 class="title has-text-white" style="font-weight:700; font-size:1.8em;">
                    ğŸ¤– AI ê°ì • ë¶„ì„ ì‹œìŠ¤í…œ
                </h1>
                <h2 class="subtitle has-text-white-bis" style="font-size:1.1em;">
                    ì²¨ë‹¨ ë”¥ëŸ¬ë‹ ê¸°ìˆ ë¡œ ì–¼êµ´ í‘œì •ì„ ë¶„ì„í•©ë‹ˆë‹¤
                </h2>
            </div>
        </div>
    </header>

    <section class="section" style="min-height:70vh; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);">
        <div class="container">
            <div class="box" style="background: linear-gradient(135deg, #fffbe6 0%, #e3f0ff 100%); box-shadow: 0 8px 32px 0 rgba(31,38,135,0.15); border-radius: 18px;">
                <h1 class="title has-text-centered" style="font-weight:900; letter-spacing:1px; color:#3a3a3a; margin-bottom:1.5rem;">ğŸ“Š ë¶„ì„ ê¸°ë¡</h1>
                
                <div class="has-text-centered" style="margin-bottom:20px;">
                    <a href="/" class="button is-link is-light">ìƒˆë¡œìš´ ë¶„ì„</a>
                </div>

                {% if results %}
                <div class="table-container">
                    <table class="table is-fullwidth is-striped is-hoverable" style="border-radius:8px; overflow:hidden;">
                        <thead>
                            <tr style="background: linear-gradient(90deg, #667eea, #764ba2); color:white;">
                                <th style="color:white;">ë¶„ì„ ì‹œê°„</th>
                                <th style="color:white;">ì£¼ìš” ê°ì •</th>
                                <th style="color:white;">ì‹ ë¢°ë„</th>
                                <th style="color:white;">ì´ë¯¸ì§€</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for result in results %}
                            <tr>
                                <td>{{ result.analysis_time.strftime('%Y-%m-%d %H:%M') }}</td>
                                <td>
                                    <span class="tag emotion-tag" style="background:
                                        {% if result.dominant_emotion == 'happy' %}linear-gradient(90deg,#ffe082,#ffd54f){% elif result.dominant_emotion == 'sad' %}linear-gradient(90deg,#b3c6f7,#4a90e2){% elif result.dominant_emotion == 'angry' %}linear-gradient(90deg,#ffb3b3,#e74c3c){% elif result.dominant_emotion == 'surprise' %}linear-gradient(90deg,#e1bee7,#9b59b6){% elif result.dominant_emotion == 'fear' %}linear-gradient(90deg,#b2bec3,#34495e){% elif result.dominant_emotion == 'disgust' %}linear-gradient(90deg,#b2f7c6,#27ae60){% elif result.dominant_emotion == 'neutral' %}linear-gradient(90deg,#ececec,#7f8c8d){% else %}#f0f0f0{% endif %}; color:#222;">
                                        {% if result.dominant_emotion == 'happy' %}ğŸ˜Š{% elif result.dominant_emotion == 'sad' %}ğŸ˜¢{% elif result.dominant_emotion == 'angry' %}ğŸ˜ {% elif result.dominant_emotion == 'surprise' %}ğŸ˜²{% elif result.dominant_emotion == 'fear' %}ğŸ˜¨{% elif result.dominant_emotion == 'disgust' %}ğŸ¤¢{% elif result.dominant_emotion == 'neutral' %}ğŸ˜{% else %}ğŸ™‚{% endif %}
                                        {{ result.dominant_emotion }}
                                    </span>
                                </td>
                                <td>
                                    {% set scores = result.emotion_scores | from_json %}
                                    {% if scores %}
                                        <strong>{{ scores[result.dominant_emotion] | round(1) }}%</strong>
                                    {% endif %}
                                </td>
                                <td>
                                    <img src="{{ url_for('static', filename='uploads/' + result.image_filename) }}" 
                                         alt="ë¶„ì„ ì´ë¯¸ì§€" 
                                         style="width:50px; height:50px; object-fit:cover; border-radius:8px;">
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <div class="has-text-centered" style="padding:3rem; color:#888;">
                    <span style="font-size:3em;">ğŸ“</span><br>
                    <p style="font-size:1.2em; margin-top:1rem;">ì•„ì§ ë¶„ì„ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                    <p>ì²« ë²ˆì§¸ ê°ì • ë¶„ì„ì„ ì‹œì‘í•´ë³´ì„¸ìš”!</p>
                </div>
                {% endif %}
            </div>
        </div>
    </section>

    <!-- í‘¸í„° -->
    <footer class="footer" style="background: linear-gradient(135deg, #434343 0%, #000000 100%); padding: 2rem 1.5rem;">
        <div class="content has-text-centered has-text-white">
            <div class="columns is-mobile is-centered">
                <div class="column is-narrow">
                    <h3 class="title is-5 has-text-white" style="margin-bottom:1rem;">ğŸ§  AI ê°ì • ë¶„ì„</h3>
                    <p style="font-size:0.95em; color:#b5b5b5;">
                        DeepFace ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•œ<br>
                        ê³ ì •ë°€ ì–¼êµ´ ê°ì • ì¸ì‹ ì„œë¹„ìŠ¤
                    </p>
                </div>
            </div>
            <hr style="background-color:#555; margin:1.5rem 0;">
            <div class="level">
                <div class="level-item">
                    <div class="tags">
                        <span class="tag is-dark">Flask</span>
                        <span class="tag is-dark">DeepFace</span>
                        <span class="tag is-dark">TensorFlow</span>
                        <span class="tag is-dark">AI</span>
                    </div>
                </div>
            </div>
            <p style="font-size:0.85em; color:#999;">
                Â© 2025 AI ê°ì • ë¶„ì„ ì‹œìŠ¤í…œ. ëª¨ë“  ê¶Œë¦¬ ë³´ìœ .
            </p>
        </div>
    </footer>
</body>
</html>
